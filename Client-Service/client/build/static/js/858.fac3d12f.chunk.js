"use strict";(self.webpackChunkclient_service=self.webpackChunkclient_service||[]).push([[858],{5858:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(5043),r=a(2816),n=a(2110),o=a(1045),l=a(4496),i=a(4516),c=a(6839),d=a(5078),u=a(2299),m=a(4393),h=a(1906),x=a(1245),p=a(2220),A=a(6258),j=a(7566),g=a(2954),f=a(1338),v=a(7199),b=a(3216),y=a(196),C=a(9302),S=a(8390),N=a(2870),D=a(3193),R=a(1292),T=a(7972),w=a(4605),E=a(4791),B=a(446),P=a.n(B),k=a(579);const I=["User Details","Personal Info","Documents"],_=()=>{const[e,t]=(0,s.useState)({username:"",password:"",email:"",firstName:"",lastName:"",phoneNumber:"",roleNames:["CUSTOMER"],permissionNames:["PERMISSION_WRITE"],createCustomerDto:{id:0,userId:0,firstName:"",lastName:"",phoneNumber:"",email:"",gender:"Male",address:"",dateOfBirth:P()(),status:"Active",accountType:"SAVING"}}),[a,B]=(0,s.useState)(null),[_,W]=(0,s.useState)(""),[O,U]=(0,s.useState)(0),[z,q]=(0,s.useState)(!1),F=(0,b.Zp)(),K=e=>{const{name:a,value:s}=e.target;t((e=>({...e,[a]:s})))},L=e=>{const{name:a,value:s}=e.target;t((e=>({...e,createCustomerDto:{...e.createCustomerDto,[a]:s}})))};return(0,k.jsxs)(r.A,{className:"container",children:[(0,k.jsxs)(n.A,{className:"card",children:[(0,k.jsxs)("div",{className:"tag",children:[(0,k.jsx)(o.A,{className:"avatar",children:(0,k.jsx)(j.A,{fontSize:"large"})}),(0,k.jsx)(l.A,{component:"h1",variant:"h5",fontWeight:"bold",children:"Customer Registration"}),(0,k.jsx)(l.A,{variant:"body2",sx:{opacity:.8,mt:1},children:"Join our premium banking experience"})]}),(0,k.jsxs)("div",{className:"form",children:[_&&(0,k.jsx)(i.A,{mb:2,p:2,bgcolor:"#ffebee",borderRadius:2,children:(0,k.jsx)(l.A,{color:"error",align:"center",children:_})}),(0,k.jsx)(c.A,{activeStep:O,alternativeLabel:!0,children:I.map((e=>(0,k.jsx)(d.A,{children:(0,k.jsx)(u.A,{children:e})},e)))}),(0,k.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),W("");try{const t=await(0,y.kz)(e);console.log("Registration Response:",t);const s=t.userId;if(!s)throw new Error("Registration successful but User ID not returned. Cannot upload document.");a&&(await(0,y.XX)(s,a),console.log("Document uploaded successfully")),q(!0),setTimeout((()=>{q(!1),F("/login")}),3e3)}catch(s){console.error(s),W(s.message||"Registration failed. Please try again.")}},noValidate:!0,children:[(0,k.jsxs)("div",{className:"step-content",children:[0===O&&(0,k.jsxs)(i.A,{children:[(0,k.jsx)(l.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:"Account Credentials"}),(0,k.jsxs)(i.A,{display:"flex",gap:2,mb:2,children:[(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:K}),(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,type:"password",label:"Password",name:"password",value:e.password,onChange:K})]}),(0,k.jsx)(l.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",mt:3,children:"Contact Information"}),(0,k.jsxs)(i.A,{display:"flex",gap:2,children:[(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",value:e.email,onChange:K}),(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Phone Number",name:"phoneNumber",value:e.phoneNumber,onChange:K})]})]}),1===O&&(0,k.jsxs)(i.A,{children:[(0,k.jsx)(l.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:"Personal Details"}),(0,k.jsxs)(i.A,{display:"flex",gap:2,mb:2,children:[(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"First Name",name:"firstName",value:e.firstName,onChange:K}),(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",value:e.lastName,onChange:K})]}),(0,k.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Address",name:"address",value:e.createCustomerDto.address,onChange:L,sx:{mb:2}}),(0,k.jsxs)(i.A,{display:"flex",gap:4,alignItems:"center",mb:2,children:[(0,k.jsx)(S.$,{dateAdapter:C.R,children:(0,k.jsx)(N.l,{label:"Date of Birth",value:e.createCustomerDto.dateOfBirth,onChange:e=>{t((t=>({...t,createCustomerDto:{...t.createCustomerDto,dateOfBirth:null!==e&&void 0!==e?e:P()()}})))},slotProps:{textField:{fullWidth:!0}}})}),(0,k.jsxs)(D.A,{component:"fieldset",children:[(0,k.jsx)(R.A,{component:"legend",children:"Gender"}),(0,k.jsxs)(T.A,{row:!0,name:"gender",value:e.createCustomerDto.gender,onChange:L,children:[(0,k.jsx)(w.A,{value:"Male",control:(0,k.jsx)(E.A,{}),label:"Male"}),(0,k.jsx)(w.A,{value:"Female",control:(0,k.jsx)(E.A,{}),label:"Female"})]})]})]}),(0,k.jsxs)(D.A,{component:"fieldset",fullWidth:!0,sx:{mt:1},children:[(0,k.jsx)(R.A,{component:"legend",children:"Account Type"}),(0,k.jsxs)(T.A,{row:!0,name:"accountType",value:e.createCustomerDto.accountType,onChange:L,children:[(0,k.jsx)(w.A,{value:"SAVING",control:(0,k.jsx)(E.A,{}),label:"Savings Account"}),(0,k.jsx)(w.A,{value:"CURRENT",control:(0,k.jsx)(E.A,{}),label:"Current Account"})]})]})]}),2===O&&(0,k.jsxs)(i.A,{textAlign:"center",children:[(0,k.jsx)(l.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:"KYC Verification"}),(0,k.jsx)(l.A,{variant:"body2",color:"textSecondary",mb:3,children:"Please upload a valid proof of address (ID Card, Utility Bill, etc.)"}),(0,k.jsxs)("div",{className:"file-upload-area",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},children:[(0,k.jsx)(g.A,{style:{fontSize:60,color:"#bdbdbd"}}),(0,k.jsx)(l.A,{variant:"body1",mt:2,color:"textSecondary",children:"Click to select a file"}),(0,k.jsx)("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:e=>{e.target.files&&e.target.files.length>0&&B(e.target.files[0])}})]}),a&&(0,k.jsxs)("div",{className:"selected-file",children:[(0,k.jsx)(v.A,{})," ",a.name]})]})]}),(0,k.jsxs)("div",{className:"navigation-buttons",children:[(0,k.jsx)(h.A,{disabled:0===O,onClick:()=>{U((e=>e-1))},variant:"outlined",size:"large",children:"Back"}),O===I.length-1?(0,k.jsx)(h.A,{type:"submit",variant:"contained",size:"large",disabled:!a,children:"Create Account"}):(0,k.jsx)(h.A,{variant:"contained",onClick:()=>{U((e=>e+1))},size:"large",children:"Next Step"})]})]})]})]}),(0,k.jsx)(x.A,{open:z,onClose:()=>{},closeAfterTransition:!0,BackdropComponent:p.A,BackdropProps:{timeout:500},children:(0,k.jsx)(A.A,{in:z,children:(0,k.jsxs)(i.A,{className:"success-modal",children:[(0,k.jsx)(f.A,{style:{fontSize:80,color:"#4caf50",marginBottom:16}}),(0,k.jsx)(l.A,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Registration Successful!"}),(0,k.jsx)(l.A,{color:"textSecondary",children:"Your account has been created and your documents uploaded."}),(0,k.jsx)(l.A,{variant:"caption",display:"block",sx:{mt:2},children:"Redirecting to login..."})]})})})]})}},6291:(e,t,a)=>{a.d(t,{A:()=>r});const s=a(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e.idempotencyKey&&(e.headers["Idempotency-Key"]=e.idempotencyKey),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>e),(e=>(e.response&&e.response.status,Promise.reject(e))));const r=s},196:(e,t,a)=>{a.d(t,{XX:()=>n,kz:()=>r,xt:()=>o});var s=a(6291);const r=async e=>(await s.A.post("users/customer",e)).data,n=async(e,t)=>{const a=new FormData;a.append("file",t);return(await s.A.post(`customer/${e}/upload`,a,{headers:{"Content-Type":"multipart/form-data"}})).data},o=async e=>{try{const t=await s.A.get(`customer/${e}`);return console.log(t),t.data}catch(t){throw console.error("Error fetching customer data:",t),new Error("Error fetching customer data. Please try again.")}}}}]);
//# sourceMappingURL=858.fac3d12f.chunk.js.map