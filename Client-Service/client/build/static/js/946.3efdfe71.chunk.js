"use strict";(self.webpackChunkclient_service=self.webpackChunkclient_service||[]).push([[946],{9540:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(5043),r=a(2816),n=a(2110),o=a(1045),i=a(4496),l=a(4393),c=a(1906),d=a(7566),u=a(3216),m=a(1422),p=a(579);const h=()=>{const[e,t]=(0,s.useState)(""),[a,h]=(0,s.useState)(""),[S,y]=(0,s.useState)(""),[g,A]=(0,s.useState)(""),[v,f]=(0,s.useState)(!1),N=(0,u.Zp)();return(0,p.jsx)(r.A,{className:"container",children:(0,p.jsxs)(n.A,{className:"card",children:[(0,p.jsxs)("div",{className:"tag",children:[(0,p.jsx)(o.A,{className:"avatar",children:(0,p.jsx)(d.A,{})}),(0,p.jsx)(i.A,{component:"h1",variant:"h5",children:v?"Verify OTP":"Send OTP"})]}),(0,p.jsxs)("form",{className:"form",onSubmit:v?async e=>{e.preventDefault();try{(await(0,m.RY)(g)).success?(y("OTP verified successfully. Redirecting to set a new password."),h(""),setTimeout((()=>N("/resetpassword",{state:{otp:g}})),1200)):(h("Invalid or expired OTP. Please try again."),y(""))}catch(t){h(t.message||"Failed to verify OTP. Please try again."),y("")}}:async t=>{t.preventDefault();try{await(0,m.BD)(e),y("Password reset request sent. Please check your email for instructions."),h(""),f(!0)}catch(a){h(a.message||"Failed to request password reset. Please try again."),y("")}},noValidate:!0,children:[v?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",autoComplete:"otp",autoFocus:!0,value:g,onChange:e=>A(e.target.value)})}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Enter Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>t(e.target.value)})}),(0,p.jsx)("div",{className:"submit-btn",children:(0,p.jsx)(c.A,{type:"submit",variant:"contained",className:"submit",children:v?"Verify OTP":"Send OTP"})}),(0,p.jsx)("div",{children:a&&(0,p.jsx)(i.A,{color:"error",align:"center",variant:"body2",children:a})})]})]})})}},6291:(e,t,a)=>{a.d(t,{A:()=>r});const s=a(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e.idempotencyKey&&(e.headers["Idempotency-Key"]=e.idempotencyKey),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>e),(e=>(e.response&&e.response.status,Promise.reject(e))));const r=s},1422:(e,t,a)=>{a.d(t,{BD:()=>o,RY:()=>i,hU:()=>c,iD:()=>r,kz:()=>n,xw:()=>l});var s=a(6291);const r=async e=>{const t=await s.A.post("auth/login",e),{jwtToken:a,userName:r,authorities:n,userId:o,email:i,firstName:l,lastName:c,phoneNumber:d}=t.data.data;localStorage.setItem("authToken",a),localStorage.setItem("userName",r),localStorage.setItem("roles",JSON.stringify(n.filter((e=>["ADMIN","USER","CUSTOMER"].includes(e))))),localStorage.setItem("permissions",JSON.stringify(n.filter((e=>["PERMISSION_READ","PERMISSION_WRITE"].includes(e)))));const u=[{userId:o,email:i,userName:r,firstName:l,lastName:c,phoneNumber:d}];localStorage.setItem("userDetails",JSON.stringify(u))},n=async e=>(await s.A.post("users/create",e)).data,o=async e=>(await s.A.post(`auth/forgot-password?email=${encodeURIComponent(e)}`)).data,i=async e=>(await s.A.post(`auth/verify-otp?otp=${encodeURIComponent(e)}`)).data,l=async(e,t)=>(await s.A.post(`auth/reset-password?otp=${encodeURIComponent(e)}&newPassword=${encodeURIComponent(t)}`)).data,c=async()=>(await s.A.get("users/get")).data},5879:(e,t,a)=>{a.d(t,{A:()=>s});const s=a(5844).A}}]);
//# sourceMappingURL=946.3efdfe71.chunk.js.map