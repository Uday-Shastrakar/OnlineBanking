"use strict";(self.webpackChunkclient_service=self.webpackChunkclient_service||[]).push([[858],{5858:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var r=a(5043),s=a(2816),n=a(2110),l=a(1045),o=a(4496),i=a(4516),c=a(6839),d=a(5078),u=a(2299),m=a(7811),h=a(1906),x=a(1245),A=a(2220),p=a(6258),g=a(7566),j=a(2954),f=a(1338),v=a(7199),b=a(3216),y=a(196),C=a(9302),N=a(8390),S=a(2870),w=a(3193),D=a(1292),B=a(7972),k=a(4605),R=a(4791),I=a(446),W=a.n(I),E=a(579);const P=["User Details","Personal Info","Documents"],T=()=>{const[e,t]=(0,r.useState)({username:"",password:"",email:"",firstName:"",lastName:"",phoneNumber:"",roleNames:["CUSTOMER"],permissionNames:["PERMISSION_WRITE"],createCustomerDto:{id:0,userId:0,firstName:"",lastName:"",phoneNumber:"",email:"",gender:"Male",address:"",dateOfBirth:W()(),status:"Active",accountType:"SAVING"}}),[a,I]=(0,r.useState)(null),[T,q]=(0,r.useState)(""),[z,U]=(0,r.useState)(0),[F,M]=(0,r.useState)(!1),O=(0,b.Zp)(),V=e=>{const{name:a,value:r}=e.target;t((e=>({...e,[a]:r})))},G=e=>{const{name:a,value:r}=e.target;t((e=>({...e,createCustomerDto:{...e.createCustomerDto,[a]:r}})))};return(0,E.jsxs)(s.A,{className:"container",children:[(0,E.jsxs)(n.A,{className:"card",children:[(0,E.jsxs)("div",{className:"tag",children:[(0,E.jsx)(l.A,{className:"avatar",children:(0,E.jsx)(g.A,{fontSize:"large"})}),(0,E.jsx)(o.A,{component:"h1",variant:"h5",fontWeight:"bold",children:"Customer Registration"}),(0,E.jsx)(o.A,{variant:"body2",sx:{opacity:.8,mt:1},children:"Join our premium banking experience"})]}),(0,E.jsxs)("div",{className:"form",children:[T&&(0,E.jsx)(i.A,{mb:2,p:2,bgcolor:"#ffebee",borderRadius:2,children:(0,E.jsx)(o.A,{color:"error",align:"center",children:T})}),(0,E.jsx)(c.A,{activeStep:z,alternativeLabel:!0,children:P.map((e=>(0,E.jsx)(d.A,{children:(0,E.jsx)(u.A,{children:e})},e)))}),(0,E.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),q("");try{const t=await y.m.register(e);console.log("Registration Response:",t);const r=t.userId;if(!r)throw new Error("Registration successful but User ID not returned. Cannot upload document.");a&&(await y.m.uploadDocument(r,a),console.log("Document uploaded successfully")),M(!0),setTimeout((()=>{M(!1),O("/login")}),3e3)}catch(r){console.error(r),q(r.message||"Registration failed. Please try again.")}},noValidate:!0,children:[(0,E.jsxs)("div",{className:"step-content",children:[0===z&&(0,E.jsxs)(i.A,{children:[(0,E.jsx)(o.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:"Account Credentials"}),(0,E.jsxs)(i.A,{display:"flex",gap:2,mb:2,children:[(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Username",name:"username",value:e.username,onChange:V}),(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,type:"password",label:"Password",name:"password",value:e.password,onChange:V})]}),(0,E.jsx)(o.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",mt:3,children:"Contact Information"}),(0,E.jsxs)(i.A,{display:"flex",gap:2,children:[(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",value:e.email,onChange:V}),(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Phone Number",name:"phoneNumber",value:e.phoneNumber,onChange:V})]})]}),1===z&&(0,E.jsxs)(i.A,{children:[(0,E.jsx)(o.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:"Personal Details"}),(0,E.jsxs)(i.A,{display:"flex",gap:2,mb:2,children:[(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"First Name",name:"firstName",value:e.firstName,onChange:V}),(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",value:e.lastName,onChange:V})]}),(0,E.jsx)(m.A,{variant:"outlined",required:!0,fullWidth:!0,label:"Address",name:"address",value:e.createCustomerDto.address,onChange:G,sx:{mb:2}}),(0,E.jsxs)(i.A,{display:"flex",gap:4,alignItems:"center",mb:2,children:[(0,E.jsx)(N.$,{dateAdapter:C.R,children:(0,E.jsx)(S.l,{label:"Date of Birth",value:e.createCustomerDto.dateOfBirth,onChange:e=>{t((t=>({...t,createCustomerDto:{...t.createCustomerDto,dateOfBirth:null!==e&&void 0!==e?e:W()()}})))},slotProps:{textField:{fullWidth:!0}}})}),(0,E.jsxs)(w.A,{component:"fieldset",children:[(0,E.jsx)(D.A,{component:"legend",children:"Gender"}),(0,E.jsxs)(B.A,{row:!0,name:"gender",value:e.createCustomerDto.gender,onChange:G,children:[(0,E.jsx)(k.A,{value:"Male",control:(0,E.jsx)(R.A,{}),label:"Male"}),(0,E.jsx)(k.A,{value:"Female",control:(0,E.jsx)(R.A,{}),label:"Female"})]})]})]}),(0,E.jsxs)(w.A,{component:"fieldset",fullWidth:!0,sx:{mt:1},children:[(0,E.jsx)(D.A,{component:"legend",children:"Account Type"}),(0,E.jsxs)(B.A,{row:!0,name:"accountType",value:e.createCustomerDto.accountType,onChange:G,children:[(0,E.jsx)(k.A,{value:"SAVING",control:(0,E.jsx)(R.A,{}),label:"Savings Account"}),(0,E.jsx)(k.A,{value:"CURRENT",control:(0,E.jsx)(R.A,{}),label:"Current Account"})]})]})]}),2===z&&(0,E.jsxs)(i.A,{textAlign:"center",children:[(0,E.jsx)(o.A,{variant:"h6",gutterBottom:!0,color:"textSecondary",children:"KYC Verification"}),(0,E.jsx)(o.A,{variant:"body2",color:"textSecondary",mb:3,children:"Please upload a valid proof of address (ID Card, Utility Bill, etc.)"}),(0,E.jsxs)("div",{className:"file-upload-area",onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},children:[(0,E.jsx)(j.A,{style:{fontSize:60,color:"#bdbdbd"}}),(0,E.jsx)(o.A,{variant:"body1",mt:2,color:"textSecondary",children:"Click to select a file"}),(0,E.jsx)("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:e=>{e.target.files&&e.target.files.length>0&&I(e.target.files[0])}})]}),a&&(0,E.jsxs)("div",{className:"selected-file",children:[(0,E.jsx)(v.A,{})," ",a.name]})]})]}),(0,E.jsxs)("div",{className:"navigation-buttons",children:[(0,E.jsx)(h.A,{disabled:0===z,onClick:()=>{U((e=>e-1))},variant:"outlined",size:"large",children:"Back"}),z===P.length-1?(0,E.jsx)(h.A,{type:"submit",variant:"contained",size:"large",disabled:!a,children:"Create Account"}):(0,E.jsx)(h.A,{variant:"contained",onClick:()=>{U((e=>e+1))},size:"large",children:"Next Step"})]})]})]})]}),(0,E.jsx)(x.A,{open:F,onClose:()=>{},closeAfterTransition:!0,BackdropComponent:A.A,BackdropProps:{timeout:500},children:(0,E.jsx)(p.A,{in:F,children:(0,E.jsxs)(i.A,{className:"success-modal",children:[(0,E.jsx)(f.A,{style:{fontSize:80,color:"#4caf50",marginBottom:16}}),(0,E.jsx)(o.A,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Registration Successful!"}),(0,E.jsx)(o.A,{color:"textSecondary",children:"Your account has been created and your documents uploaded."}),(0,E.jsx)(o.A,{variant:"caption",display:"block",sx:{mt:2},children:"Redirecting to login..."})]})})})]})}},196:(e,t,a)=>{a.d(t,{m:()=>s});var r=a(7800);const s={createCustomer:async e=>(await r.A.post("customer/create-customer",e)).data,getCustomer:async e=>{try{const t=await r.A.get(`customer/${e}`);return console.log(t),t.data}catch(t){throw console.error("Error fetching customer data:",t),new Error("Error fetching customer data. Please try again.")}},register:async e=>(await r.A.post("users/customer",e)).data,uploadDocument:async(e,t)=>{const a=new FormData;a.append("file",t);return(await r.A.post(`customer/${e}/upload`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}}}}]);
//# sourceMappingURL=858.96ec4467.chunk.js.map