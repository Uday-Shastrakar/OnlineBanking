"use strict";(self.webpackChunkclient_service=self.webpackChunkclient_service||[]).push([[540],{9540:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(5043),r=t(2816),n=t(2110),o=t(1045),i=t(4496),l=t(4393),c=t(1906),d=t(7566),u=t(3216),m=t(1422),p=t(579);const h=()=>{const[e,a]=(0,s.useState)(""),[t,h]=(0,s.useState)(""),[S,g]=(0,s.useState)(""),[A,v]=(0,s.useState)(""),[y,f]=(0,s.useState)(!1),N=(0,u.Zp)();return(0,p.jsx)(r.A,{className:"container",children:(0,p.jsxs)(n.A,{className:"card",children:[(0,p.jsxs)("div",{className:"tag",children:[(0,p.jsx)(o.A,{className:"avatar",children:(0,p.jsx)(d.A,{})}),(0,p.jsx)(i.A,{component:"h1",variant:"h5",children:y?"Verify OTP":"Send OTP"})]}),(0,p.jsxs)("form",{className:"form",onSubmit:y?async e=>{e.preventDefault();try{(await(0,m.RY)(A)).success?(g("OTP verified successfully. Redirecting to set a new password."),h(""),setTimeout((()=>N("/resetpassword",{state:{otp:A}})),1200)):(h("Invalid or expired OTP. Please try again."),g(""))}catch(a){h(a.message||"Failed to verify OTP. Please try again."),g("")}}:async a=>{a.preventDefault();try{await(0,m.BD)(e),g("Password reset request sent. Please check your email for instructions."),h(""),f(!0)}catch(t){h(t.message||"Failed to request password reset. Please try again."),g("")}},noValidate:!0,children:[y?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"otp",label:"Enter OTP",name:"otp",autoComplete:"otp",autoFocus:!0,value:A,onChange:e=>v(e.target.value)})}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Enter Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>a(e.target.value)})}),(0,p.jsx)("div",{className:"submit-btn",children:(0,p.jsx)(c.A,{type:"submit",variant:"contained",className:"submit",children:y?"Verify OTP":"Send OTP"})}),(0,p.jsx)("div",{children:t&&(0,p.jsx)(i.A,{color:"error",align:"center",variant:"body2",children:t})})]})]})})}},6291:(e,a,t)=>{t.d(a,{A:()=>r});const s=t(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://192.168.1.100:9093/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const a=localStorage.getItem("authToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>e),(e=>(e.response&&e.response.status,Promise.reject(e))));const r=s},1422:(e,a,t)=>{t.d(a,{BD:()=>o,RY:()=>i,hU:()=>c,iD:()=>r,kz:()=>n,xw:()=>l});var s=t(6291);const r=async e=>{const a=await s.A.post("auth/login",e),{jwtToken:t,userName:r,authorities:n,userId:o,email:i,firstName:l,lastName:c,phoneNumber:d}=a.data.data;localStorage.setItem("authToken",t),localStorage.setItem("userName",r),localStorage.setItem("roles",JSON.stringify(n.filter((e=>["ADMIN","USER","CUSTOMER"].includes(e))))),localStorage.setItem("permissions",JSON.stringify(n.filter((e=>["PERMISSION_READ","PERMISSION_WRITE"].includes(e)))));const u=[{userId:o,email:i,userName:r,firstName:l,lastName:c,phoneNumber:d}];localStorage.setItem("userDetails",JSON.stringify(u))},n=async e=>(await s.A.post("/users/create",e)).data,o=async e=>(await s.A.post(`/auth/forgot-password?email=${encodeURIComponent(e)}`)).data,i=async e=>(await s.A.post(`/auth/verify-otp?otp=${encodeURIComponent(e)}`)).data,l=async(e,a)=>(await s.A.post(`/auth/reset-password?otp=${encodeURIComponent(e)}&newPassword=${encodeURIComponent(a)}`)).data,c=async()=>(await s.A.get("/users/get")).data}}]);
//# sourceMappingURL=540.12b7895e.chunk.js.map