"use strict";(self.webpackChunkclient_service=self.webpackChunkclient_service||[]).push([[679],{6679:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(5043),r=s(2816),o=s(2110),n=s(1045),i=s(4496),c=s(4393),l=s(1906),d=s(3216),u=s(7566),m=s(1422),p=s(579);const h=()=>{const[e,a]=(0,t.useState)(""),[s,h]=(0,t.useState)(""),[w,g]=(0,t.useState)(""),[S,A]=(0,t.useState)(""),[N,f]=(0,t.useState)(!0),v=(0,d.zy)(),y=(0,d.Zp)(),{otp:R}=v.state;(0,t.useEffect)((()=>{f(e===s)}),[e,s]);return(0,p.jsx)(r.A,{className:"container",children:(0,p.jsxs)(o.A,{className:"card",children:[(0,p.jsxs)("div",{className:"tag",children:[(0,p.jsx)(n.A,{className:"avatar",children:(0,p.jsx)(u.A,{})}),(0,p.jsx)(i.A,{component:"h1",variant:"h5",children:"Reset Password"}),w&&(0,p.jsx)(i.A,{color:"error",children:w})]}),(0,p.jsxs)("form",{className:"form",onSubmit:async a=>{if(a.preventDefault(),!N)return g("Passwords do not match."),void A("");try{(await(0,m.xw)(R,e)).success?(A("Password reset successfully. Redirecting to login page."),g(""),setTimeout((()=>y("/login")),1e3)):(g("Error resetting password. Please try again."),A(""))}catch(s){g(s.message||"Failed to reset password. Please try again."),A("")}},noValidate:!0,children:[(0,p.jsx)(c.A,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"new-password",label:"New Password",name:"new-password",type:"password",autoComplete:"new-password",value:e,onChange:e=>a(e.target.value)}),(0,p.jsx)(c.A,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"confirm-password",label:"Confirm Password",name:"confirm-password",type:"password",autoComplete:"new-password",value:s,onChange:e=>h(e.target.value)}),(0,p.jsx)("div",{className:"submit-btn",children:(0,p.jsx)(l.A,{type:"submit",variant:"contained",className:"submit",disabled:!N,children:"Reset Password"})}),!N&&(0,p.jsx)(i.A,{color:"error",align:"center",variant:"body2",mt:2,children:"Passwords do not match."}),w&&(0,p.jsx)(i.A,{color:"error",align:"center",variant:"body2",mt:2,children:w}),S&&(0,p.jsx)(i.A,{color:"success.main",align:"center",variant:"body2",mt:2,children:S})]})]})})}},6291:(e,a,s)=>{s.d(a,{A:()=>r});const t=s(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://192.168.1.100:9093/api",headers:{"Content-Type":"application/json"}});t.interceptors.request.use((e=>{const a=localStorage.getItem("authToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>(e.response&&e.response.status,Promise.reject(e))));const r=t},1422:(e,a,s)=>{s.d(a,{BD:()=>n,RY:()=>i,hU:()=>l,iD:()=>r,kz:()=>o,xw:()=>c});var t=s(6291);const r=async e=>{const a=await t.A.post("auth/login",e),{jwtToken:s,userName:r,authorities:o,userId:n,email:i,firstName:c,lastName:l,phoneNumber:d}=a.data.data;localStorage.setItem("authToken",s),localStorage.setItem("userName",r),localStorage.setItem("roles",JSON.stringify(o.filter((e=>["ADMIN","USER","CUSTOMER"].includes(e))))),localStorage.setItem("permissions",JSON.stringify(o.filter((e=>["PERMISSION_READ","PERMISSION_WRITE"].includes(e)))));const u=[{userId:n,email:i,userName:r,firstName:c,lastName:l,phoneNumber:d}];localStorage.setItem("userDetails",JSON.stringify(u))},o=async e=>(await t.A.post("/users/create",e)).data,n=async e=>(await t.A.post(`/auth/forgot-password?email=${encodeURIComponent(e)}`)).data,i=async e=>(await t.A.post(`/auth/verify-otp?otp=${encodeURIComponent(e)}`)).data,c=async(e,a)=>(await t.A.post(`/auth/reset-password?otp=${encodeURIComponent(e)}&newPassword=${encodeURIComponent(a)}`)).data,l=async()=>(await t.A.get("/users/get")).data}}]);
//# sourceMappingURL=679.d77d7f65.chunk.js.map