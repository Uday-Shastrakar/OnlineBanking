"use strict";(self.webpackChunkclient_service=self.webpackChunkclient_service||[]).push([[528],{6528:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(5043),r=t(2816),n=t(2110),o=t(1045),i=t(4496),l=t(4393),m=t(1906),d=t(7566),u=t(3216),c=t(1422),p=t(579);const h=()=>{const[e,a]=(0,s.useState)({username:"",email:"",phoneNumber:"",firstName:"",lastName:"",password:"",roleNames:["USER"],permissionNames:["PERMISSION_READ"]}),[t,h]=(0,s.useState)(""),[N,g]=(0,s.useState)(""),[x,S]=(0,s.useState)(""),[f,A]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),y=(0,u.Zp)(),C=e=>{const{name:t,value:s}=e.target;a((e=>({...e,[t]:s})))};return(0,p.jsx)(r.A,{className:"container",children:(0,p.jsxs)(n.A,{className:"card",children:[(0,p.jsxs)("div",{className:"tag",children:[(0,p.jsx)(o.A,{className:"avatar",children:(0,p.jsx)(d.A,{})}),(0,p.jsx)(i.A,{component:"h1",variant:"h5",children:"Register"}),N&&(0,p.jsx)(i.A,{color:"error",children:N})]}),(0,p.jsxs)("form",{className:"form",onSubmit:async a=>{a.preventDefault();try{await(0,c.kz)(e),y("/login")}catch(t){g(t.message||"Registration failed. Please try again.")}},noValidate:!0,children:[(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"16px",width:"100%"},children:[(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"firstName",value:e.firstName,onChange:C,style:{flex:1}}),(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lastName",value:e.lastName,onChange:C,style:{flex:1}})]}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"16px",width:"100%"},children:[(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e.email,onChange:C,style:{flex:1}}),(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,id:"phoneNumber",label:"Phone Number",name:"phoneNumber",autoComplete:"phoneNumber",value:e.phoneNumber,onChange:C,style:{flex:1}})]}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"16px",width:"100%"},children:[(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:e.username,onChange:C,style:{flex:1}}),(0,p.jsx)(l.A,{variant:"outlined",margin:"normal",required:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:e.password,onChange:C,style:{flex:1}})]}),(0,p.jsx)("div",{className:"submit-btn",children:(0,p.jsx)(m.A,{type:"submit",variant:"contained",className:"submit",children:"Register"})})]})]})})}},6291:(e,a,t)=>{t.d(a,{A:()=>r});const s=t(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://192.168.1.100:9093/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const a=localStorage.getItem("authToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>e),(e=>(e.response&&e.response.status,Promise.reject(e))));const r=s},1422:(e,a,t)=>{t.d(a,{BD:()=>o,RY:()=>i,hU:()=>m,iD:()=>r,kz:()=>n,xw:()=>l});var s=t(6291);const r=async e=>{const a=await s.A.post("auth/login",e),{jwtToken:t,userName:r,authorities:n,userId:o,email:i,firstName:l,lastName:m,phoneNumber:d}=a.data.data;localStorage.setItem("authToken",t),localStorage.setItem("userName",r),localStorage.setItem("roles",JSON.stringify(n.filter((e=>["ADMIN","USER","CUSTOMER"].includes(e))))),localStorage.setItem("permissions",JSON.stringify(n.filter((e=>["PERMISSION_READ","PERMISSION_WRITE"].includes(e)))));const u=[{userId:o,email:i,userName:r,firstName:l,lastName:m,phoneNumber:d}];localStorage.setItem("userDetails",JSON.stringify(u))},n=async e=>(await s.A.post("/users/create",e)).data,o=async e=>(await s.A.post(`/auth/forgot-password?email=${encodeURIComponent(e)}`)).data,i=async e=>(await s.A.post(`/auth/verify-otp?otp=${encodeURIComponent(e)}`)).data,l=async(e,a)=>(await s.A.post(`/auth/reset-password?otp=${encodeURIComponent(e)}&newPassword=${encodeURIComponent(a)}`)).data,m=async()=>(await s.A.get("/users/get")).data}}]);
//# sourceMappingURL=528.878ea3dd.chunk.js.map